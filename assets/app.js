angular.module("app",["ngRoute","ngAnimate"]),angular.module("app").controller("ApplicationCtrl",["$scope","$rootScope","UserSvc",function(t,e,n){window.localStorage.token&&n.getUser().then(function(e){t.$emit("userLoggedIn",e.data)}),t.$on("userLoggedIn",function(e,n){t.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,e){t.login=function(n,o){e.login(n,o).then(function(e){t.$emit("userLoggedIn",e.data),window.location.href="#/"},function(e){t.loginValidation="Incorrect username & password combination"})},t.logout=function(){e.logout()}}]),angular.module("app").controller("PostsCtrl",["$scope","$http","PostsService","filterFilter",function(t,e,n,o){t.baseUrl=location.host,t.bodyLengthLimit=250,t.posts=[],t.addPost=function(){var e=CKEDITOR.instances.editor1.getData(),o=t.urlDate(),r=t.slugify(t.postTitle),i=o+r;e&&n.send({body:e,title:t.postTitle,slug:i}).success(function(e){t.postBody=null,CKEDITOR.instances.editor1.setData(""),t.postTitle=null})},t.init_ckedit=function(){CKEDITOR.replace("editor1")},t.$on("ws:new_post",function(e,n){n=n[0],t.$apply(function(){t.posts.unshift(n),t.paginate()})}),t.$on("$viewContentLoaded",function(){}),t.currentPage=1,t.postsPerPage=5,t.prevPage=function(){t.currentPage>1&&t.currentPage--},t.nextPage=function(){t.currentPage<t.posts.length/t.postsPerPage&&t.currentPage++},t.setPage=function(e){t.currentPage=e},t.range=function(t){return new Array(t)},t.currentPage=1,t.postsPerPage=5,t.$watch("search",function(e){t.filteredPosts=o(t.posts,e),t.paginate(t.filteredPosts.length)},!0),t.paginate=function(e){t.numberOfPages=Math.ceil(e>0?e/t.postsPerPage:t.posts.length/t.postsPerPage)},t.urlDate=function(t){if(void 0===t)var e=new Date;else var e=new Date(t);var n=e.getDate(),o=e.getMonth()+1,r=e.getFullYear(),i=String(r)+"/"+String(o)+"/"+String(n)+"/";return i},t.slugify=function(t){var e=t.toLowerCase();return e=e.replace(/\s+/g,"_"),e=e.replace(/\?/g,""),e=e.replace(/\&/g,""),e=e.replace(/\=/g,"")},n.get().success(function(e){t.posts=e,t.paginate(t.posts.length)})}]).filter("output_html",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]).filter("startFrom",function(){return function(t,e){return t?(e=+e,t.slice(e)):[]}}),angular.module("app").service("PostsService",["$http",function(t){this.get=function(){return t.get("/api/posts")},this.send=function(e){return t.post("/api/posts",e)},this.single=function(e){return t.get("/api/posts",{params:{post_id:e.id}})}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(t,e){t.register=function(n,o,r){return o!=r?void(t.validationMessage="Your passwords did not match."):void e.register(n,o)}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"}).when("/logout",{controller:"LoginCtrl",templateUrl:"logout.html"}).when("/post/:id",{controller:"SinglePostCtrl",templateUrl:"singlePost.html"})}]),angular.module("app").controller("SinglePostCtrl",["$scope","$http","PostsService","$routeParams","$route","$location",function(t,e,n,o,r,i){var s=o.id;t.$on("$viewContentLoaded",function(){}),n.single({id:s}).success(function(e){t.post=e})}]),angular.module("app").service("UserSvc",["$http",function(t){var e=this;e.getUser=function(){return t.defaults.headers.common["X-Auth"]=window.localStorage.token,t.get("/api/users").then(function(t){return t})},e.login=function(n,o){return t.post("/api/sessions",{username:n,password:o}).then(function(n){return window.localStorage.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,e.getUser()})},e.register=function(n,o,r){return t.post("/api/users",{username:n,password:o}).then(function(t){return e.login(n,o).then(function(){window.location.href="/"})})},e.logout=function(){window.localStorage.removeItem("token"),window.location.href="/"}}]),angular.module("app").run(["$rootScope","$timeout","$window",function(t,e,n){!function o(){var r="ws://"+n.location.host,i=new WebSocket(r);i.onopen=function(){},i.onclose=function(t){e(o,1e4)},i.onmessage=function(e){var n=JSON.parse(e.data),o="ws:"+n.topic,r=n.data;t.$broadcast(o,r)}}()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uQ3RybC5qcyIsImxvZ2luQ3J0bC5qcyIsInBvc3RzQ3RybC5qcyIsInBvc3RzU2VydmljZS5qcyIsInJlZ2lzdHJhdGlvbkN0cmwuanMiLCJyb3V0ZXMuanMiLCJzaW5nbGVQb3N0c0N0cmwuanMiLCJ1c2VyU2VydmljZS5qcyIsIndlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiVXNlclN2YyIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiZ2V0VXNlciIsInRoZW4iLCJyZXNwb25zZSIsIiRlbWl0IiwiZGF0YSIsIiRvbiIsImV2ZW50IiwidXNlciIsImN1cnJlbnRVc2VyIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibG9jYXRpb24iLCJocmVmIiwiZXJyb3IiLCJsb2dpblZhbGlkYXRpb24iLCJsb2dvdXQiLCIkaHR0cCIsIlBvc3RzU2VydmljZSIsImZpbHRlckZpbHRlciIsImJhc2VVcmwiLCJob3N0IiwiYm9keUxlbmd0aExpbWl0IiwicG9zdHMiLCJhZGRQb3N0IiwiY2tlZGl0b3JfY29udGVudCIsIkNLRURJVE9SIiwiaW5zdGFuY2VzIiwiZWRpdG9yMSIsImdldERhdGEiLCJkYXRlX3NsdWciLCJ1cmxEYXRlIiwidGl0bGVfc2x1ZyIsInNsdWdpZnkiLCJwb3N0VGl0bGUiLCJzbHVnIiwic2VuZCIsImJvZHkiLCJ0aXRsZSIsInN1Y2Nlc3MiLCJwb3N0IiwicG9zdEJvZHkiLCJzZXREYXRhIiwiaW5pdF9ja2VkaXQiLCJyZXBsYWNlIiwiXyIsIiRhcHBseSIsInVuc2hpZnQiLCJwYWdpbmF0ZSIsImN1cnJlbnRQYWdlIiwicG9zdHNQZXJQYWdlIiwicHJldlBhZ2UiLCJuZXh0UGFnZSIsImxlbmd0aCIsInNldFBhZ2UiLCJwYWdlX251bWJlciIsInJhbmdlIiwibiIsIkFycmF5IiwiJHdhdGNoIiwidGVybSIsImZpbHRlcmVkUG9zdHMiLCJudW1iZXJfb2ZfaXRlbXMiLCJudW1iZXJPZlBhZ2VzIiwiTWF0aCIsImNlaWwiLCJ0aW1lIiwidW5kZWZpbmVkIiwiZGF0ZSIsIkRhdGUiLCJkYXkiLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsInllYXIiLCJnZXRGdWxsWWVhciIsInVybF9kYXRlIiwiU3RyaW5nIiwic3RyaW5nIiwidG9Mb3dlckNhc2UiLCJnZXQiLCJmaWx0ZXIiLCIkc2NlIiwidmFsIiwidHJ1c3RBc0h0bWwiLCJpbnB1dCIsInN0YXJ0Iiwic2xpY2UiLCJzZXJ2aWNlIiwidGhpcyIsInNpbmdsZSIsInBhcmFtZXRlcnMiLCJwYXJhbXMiLCJwb3N0X2lkIiwiaWQiLCJyZWdpc3RlciIsInBhc3N3b3JkX2NvbmZpcm0iLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiJHJvdXRlUGFyYW1zIiwiJHJvdXRlIiwiJGxvY2F0aW9uIiwic3ZjIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwicmVtb3ZlSXRlbSIsInJ1biIsIiR0aW1lb3V0IiwiJHdpbmRvdyIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwiV2ViU29ja2V0Iiwib25vcGVuIiwib25jbG9zZSIsImUiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwibmFtZSIsInRvcGljIiwiJGJyb2FkY2FzdCJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQUFDLE9BQUEsT0FBQSxVQUFBLGNDREFELFFBQUFDLE9BQUEsT0FDQUMsV0FBQSxtQkFBQSxTQUFBLGFBQUEsVUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQU9BQyxPQUFBQyxhQUFBQyxPQUNBSCxFQUFBSSxVQUNBQyxLQUFBLFNBQUFDLEdBQ0FSLEVBQUFTLE1BQUEsZUFBQUQsRUFBQUUsUUFJQVYsRUFBQVcsSUFBQSxlQUFBLFNBQUFDLEVBQUFDLEdBQ0FiLEVBQUFj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QUcsUUFBQSxTQUFBQyxHQUVBUCxFQUFBRSxFQUFBLE1BR0FDLEVBQUFLLFVBQUEsU0FBQUQsR0FFQSxHQUFBRSxHQUFBQyxLQUFBQyxNQUFBSixFQUFBbEgsTUFFQXVILEVBQUEsTUFBQUgsRUFBQUksTUFDQXhILEVBQUFvSCxFQUFBcEgsSUFHQVQsR0FBQWtJLFdBQUFGLEVBQUF2SCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1RoaXMgZmlsZSBtdXN0IGJlIHRoZSBmaXJzdCBpbiB0aGUgbGlzdCB0byBiZSBjb25jYXRlbmF0ZWRcbmFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnLCAnbmdBbmltYXRlJ10pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnICwgW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIlVzZXJTdmNcIiwgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgVXNlclN2Yykge1xuXHRcdC8qXG5cdFx0SWYgd2UgaGF2ZSBhIHN0b3JlZCB0b2tlbiwgZ2V0IHRoZSB1c2VyIGluZm9ybWF0aW9uIGZyb20gaXRcblx0XHRhbmQgZW1pdCB0aGUgdXNlciBsb2dnZWRpbiBtZXNzYWdlcyBpbiBvcmRlciB0byBhbGxvdyB0aGUgVUkgdG8gXG5cdFx0aW5kaWNhdGUgdG8gdGhlIHVzZXIgdGhhdCB0aGV5IHdlcmUgbG9nZ2VkIGluXG5cdFx0Ki9cblx0XHRcblx0XHRpZiAod2luZG93LmxvY2FsU3RvcmFnZS50b2tlbikge1xuXHRcdFx0VXNlclN2Yy5nZXRVc2VyKClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKXtcblx0XHRcdFx0XHQkc2NvcGUuJGVtaXQoJ3VzZXJMb2dnZWRJbicsIHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHR9KVxuXHRcdH1cblxuXHRcdCRzY29wZS4kb24oJ3VzZXJMb2dnZWRJbicsIGZ1bmN0aW9uKGV2ZW50LCB1c2VyKSB7XG5cdFx0XHQkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xuXHRcdH0pXG5cdH1dKSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuXHQuY29udHJvbGxlcignTG9naW5DdHJsJyAsIFtcIiRzY29wZVwiICwgXCJVc2VyU3ZjXCIgLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG5cdFx0JHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuXHRcdFx0VXNlclN2Yy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSl7XG5cdFx0XHRcdFx0JHNjb3BlLiRlbWl0KCd1c2VyTG9nZ2VkSW4nLCByZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcjLydcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHQgICRzY29wZS5sb2dpblZhbGlkYXRpb24gPSAnSW5jb3JyZWN0IHVzZXJuYW1lICYgcGFzc3dvcmQgY29tYmluYXRpb24nO1xuXHRcdFx0XHR9KVxuXG5cdFx0fVxuXG5cdFx0JHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFVzZXJTdmMubG9nb3V0KClcblx0XHR9XG5cdH1dKSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuXHQuY29udHJvbGxlcignUG9zdHNDdHJsJywgW1wiJHNjb3BlXCIgLCBcIiRodHRwXCIsIFwiUG9zdHNTZXJ2aWNlXCIsIFwiZmlsdGVyRmlsdGVyXCIsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBQb3N0c1NlcnZpY2UsIGZpbHRlckZpbHRlcikge1xuXHRcdCRzY29wZS5iYXNlVXJsID0gbG9jYXRpb24uaG9zdDtcblx0XHQkc2NvcGUuYm9keUxlbmd0aExpbWl0ID0gMjUwO1xuXG5cdFx0JHNjb3BlLnBvc3RzID0gW107XG5cdFx0JHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgY2tlZGl0b3JfY29udGVudCA9IENLRURJVE9SLmluc3RhbmNlcy5lZGl0b3IxLmdldERhdGEoKTtcblx0XHRcdHZhciBkYXRlX3NsdWcgPSAkc2NvcGUudXJsRGF0ZSgpO1xuXHRcdFx0dmFyIHRpdGxlX3NsdWcgPSAkc2NvcGUuc2x1Z2lmeSgkc2NvcGUucG9zdFRpdGxlKTtcblxuXHRcdFx0dmFyIHNsdWcgPSBkYXRlX3NsdWcgKyB0aXRsZV9zbHVnO1xuXG5cdFx0XHRpZiAoY2tlZGl0b3JfY29udGVudCkge1xuXHRcdFx0XHRQb3N0c1NlcnZpY2Uuc2VuZCh7XG5cdFx0XHRcdFx0Ym9keTogY2tlZGl0b3JfY29udGVudCxcblx0XHRcdFx0XHR0aXRsZTogJHNjb3BlLnBvc3RUaXRsZSxcblx0XHRcdFx0XHRzbHVnOiBzbHVnXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uIChwb3N0KSB7XG5cdFx0XHRcdFx0Lypcblx0XHRcdFx0XHQvL1JlbW92ZWQgYXMgd2Vic29ja2V0IGJyb2FkY2FzdCB3b3VsZCBjYXVzZSB0aGUgcG9zdCB0byBhcHBlYXIgZHVwbGljYXRlZCBvbiB0aGUgYnJvd3NlciB0aGF0IGl0IHdhcyBwb3N0ZWQgZnJvbSBcblx0XHRcdFx0XHQvL2FzIGJvdGggb2YgdGhlIGZ1bmN0aW9ucyB3b3VsZCBnZXQgZXhlY3V0ZWQgYmVjYXVzZSB0aGUgY2xpZW50IHdobyBzZW5kcyB0aGUgcG9zdCB3b3VsZCBzdGlsbCByZWNpZXZlIHRoZSB3ZWJzb2NrZXRzIGJyb2FkY2FzdCBiYWNrIGZyb20gdGhlIHNlcnZlciAgXG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHQkc2NvcGUucG9zdEJvZHkgPSBudWxsO1xuXHRcdFx0XHRcdENLRURJVE9SLmluc3RhbmNlcy5lZGl0b3IxLnNldERhdGEoJycpO1xuXHRcdFx0XHRcdCRzY29wZS5wb3N0VGl0bGUgPSBudWxsO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdCRzY29wZS5pbml0X2NrZWRpdCA9IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgQ0tFRElUT1IucmVwbGFjZSgnZWRpdG9yMScpO1xuXHRcdH1cblxuXHRcdCRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCkge1xuXHRcdFx0cG9zdCA9IHBvc3RbMF07XG5cdFx0XHQkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdCk7XG5cdFx0XHRcdCRzY29wZS5wYWdpbmF0ZSgpO1xuXHRcdFx0fSlcblx0XHR9KVxuXG5cdFx0JHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oKXtcblx0XHRcdC8vdGhlIHBhZ2UgaXMgcmVhZHlcblx0XHR9KTtcblxuXHRcdCRzY29wZS5jdXJyZW50UGFnZSA9IDE7XG5cdFx0JHNjb3BlLnBvc3RzUGVyUGFnZSA9IDU7XG5cblx0XHQkc2NvcGUucHJldlBhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50UGFnZSA+IDEpIHtcblx0ICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlLS07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcbiAgICBcblx0ICAgICRzY29wZS5uZXh0UGFnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRQYWdlIDwgJHNjb3BlLnBvc3RzLmxlbmd0aC8kc2NvcGUucG9zdHNQZXJQYWdlKSB7XG5cdCAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFnZSsrO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBcblx0ICAgICRzY29wZS5zZXRQYWdlID0gZnVuY3Rpb24gKHBhZ2VfbnVtYmVyKSB7XG5cdCAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlID0gcGFnZV9udW1iZXI7XG5cdCAgICB9O1xuXG5cdCAgICAvL1RoaXMgd2F5IEkgY2FuIGRvOiAgXCI8bGkgbmctcmVwZWF0PVwibiBpbiByYW5nZShwYWdlcykgdHJhY2sgYnkgJGluZGV4XCI+XCIgYW5kIHNvIEkgY2FuIGRpc3BsYXkgYXMgbWFueSBpdGVtcyBhcyB0aGUgdmFsdWUgb2YgYSBudW1iZXIgYXMgdGhpcyByZXR1cm5zIGFuIGFycmF5IG9mIHRoYXQgbGVuZ2h0XG5cdCAgICAkc2NvcGUucmFuZ2UgPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIFx0cmV0dXJuIG5ldyBBcnJheShuKTtcbiAgICBcdH07XG5cblx0ICAgICRzY29wZS5jdXJyZW50UGFnZSA9IDE7IC8vY3VycmVudCBwYWdlXG5cdCAgICAkc2NvcGUucG9zdHNQZXJQYWdlID0gNTsgLy9tYXggcm93cyBmb3IgZGF0YSB0YWJsZVxuXHQgICAgXG5cdCAgICAvL3dhdGNoIHRvIHNlZSBpZiBzZWFyY2hpbmcgYW5kIHJlcGFnaW5hdGUgaWYgd2UgYXJlXG5cdCAgICAvL3RydWUgYXQgdGhlIGVuZCAgbWFnaWNhbGx5IG1ha2VzIGl0IHNvIHRoYXQgYXMgZWFjaCBleHRyYSBsZXR0ZXIgaXMgYWRkZWQgdG8gdGhlIHNlYXJjaCB3ZSBjYW4gcmVwYWdpbmF0ZVxuXHQgICAgLy93aXRob3V0IHRoZSAndHJ1ZScgaXQgb25seSBkaWQgIHRoYXRcblx0ICAgICRzY29wZS4kd2F0Y2goJ3NlYXJjaCcsIGZ1bmN0aW9uKHRlcm0pIHtcblx0ICAgICAgICAkc2NvcGUuZmlsdGVyZWRQb3N0cyA9IGZpbHRlckZpbHRlcigkc2NvcGUucG9zdHMsIHRlcm0pO1xuXHQgICAgICAgICRzY29wZS5wYWdpbmF0ZSgkc2NvcGUuZmlsdGVyZWRQb3N0cy5sZW5ndGgpO1xuXHQgICAgfSwgdHJ1ZSk7XG5cblxuXHQgICAgJHNjb3BlLnBhZ2luYXRlID0gZnVuY3Rpb24obnVtYmVyX29mX2l0ZW1zKXtcblx0ICAgIFx0aWYgKG51bWJlcl9vZl9pdGVtcyA+IDApIHtcblx0ICAgICAgICBcdCRzY29wZS5udW1iZXJPZlBhZ2VzID0gTWF0aC5jZWlsKG51bWJlcl9vZl9pdGVtcy8kc2NvcGUucG9zdHNQZXJQYWdlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgXHQkc2NvcGUubnVtYmVyT2ZQYWdlcyA9IE1hdGguY2VpbCgkc2NvcGUucG9zdHMubGVuZ3RoLyRzY29wZS5wb3N0c1BlclBhZ2UpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cblx0ICAgICRzY29wZS51cmxEYXRlID0gZnVuY3Rpb24odGltZSkge1xuXHRcdFx0aWYgKHRpbWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcblx0XHRcdH1cblx0XHQgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuXHRcdCAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCkrMTsgLy8rMSBiZWNhdXNlIG1vbnRocyBhcmUgMCBpbmRleGVkXG5cdFx0ICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXG5cdFx0ICAgIHZhciB1cmxfZGF0ZSA9ICBTdHJpbmcoeWVhcikgKyAnLycgKyBTdHJpbmcobW9udGgpICsgJy8nICsgU3RyaW5nKGRheSkgKyAnLycgO1xuXG5cdFx0XHRyZXR1cm4gdXJsX2RhdGU7XG5cblx0ICAgIH07XG5cblx0ICAgICRzY29wZS5zbHVnaWZ5ID0gZnVuY3Rpb24oc3RyaW5nKSB7XG5cdCAgICBcdHZhciBzbHVnID0gIHN0cmluZy50b0xvd2VyQ2FzZSgpO1xuXHQgICAgXHRzbHVnID0gc2x1Zy5yZXBsYWNlKC9cXHMrL2csXCJfXCIpO1xuXHQgICAgXHRzbHVnID0gc2x1Zy5yZXBsYWNlKC9cXD8vZywgXCJcIik7XG5cdCAgICBcdHNsdWcgPSBzbHVnLnJlcGxhY2UoL1xcJi9nLCBcIlwiKTtcblx0ICAgIFx0c2x1ZyA9IHNsdWcucmVwbGFjZSgvXFw9L2csIFwiXCIpO1xuXHQgICAgXHRyZXR1cm4gc2x1Zztcblx0ICAgIH07XG5cblx0UG9zdHNTZXJ2aWNlLmdldCgpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3RzKSB7XG5cdFx0XHQkc2NvcGUucG9zdHMgPSBwb3N0cztcblx0XHRcdC8vY29uc29sZS5sb2cocG9zdHMpO1xuXHRcdFx0JHNjb3BlLnBhZ2luYXRlKCRzY29wZS5wb3N0cy5sZW5ndGgpO1xuXHRcdH0pXG5cblx0fV0pXG5cblx0LmZpbHRlcignb3V0cHV0X2h0bWwnLCBbXCIkc2NlXCIsIGZ1bmN0aW9uICgkc2NlKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKHZhbCk7XG5cdCAgICB9O1xuXHR9XSlcblxuXHQuZmlsdGVyKCdzdGFydEZyb20nLCBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCwgc3RhcnQpIHtcblx0ICAgICAgICBpZihpbnB1dCkge1xuXHQgICAgICAgICAgICBzdGFydCA9ICtzdGFydDsgLy9wYXJzZSB0byBpbnRcblx0ICAgICAgICAgICAgcmV0dXJuIGlucHV0LnNsaWNlKHN0YXJ0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgfVxuXHR9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0LnNlcnZpY2UoJ1Bvc3RzU2VydmljZScsIFtcIiRodHRwXCIgLCBmdW5jdGlvbiAoJGh0dHApIHtcblx0XHR0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKTtcblx0XHR9XG5cdFx0dGhpcy5zZW5kID0gZnVuY3Rpb24gKHBvc3QpIHtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG5cdFx0fVxuXHRcdHRoaXMuc2luZ2xlID0gZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnLCB7IHBhcmFtczoge3Bvc3RfaWQ6IHBhcmFtZXRlcnMuaWR9IH0gKTtcblx0XHR9XG5cdH1dKSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuXHQuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJyAsIFtcIiRzY29wZVwiICwgXCJVc2VyU3ZjXCIgLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG5cdFx0JHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgcGFzc3dvcmRfY29uZmlybSkge1xuXHRcdFx0aWYgKHBhc3N3b3JkICE9IHBhc3N3b3JkX2NvbmZpcm0pIHtcblx0XHRcdFx0JHNjb3BlLnZhbGlkYXRpb25NZXNzYWdlID0gJ1lvdXIgcGFzc3dvcmRzIGRpZCBub3QgbWF0Y2guJztcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0VXNlclN2Yy5yZWdpc3Rlcih1c2VybmFtZSwgcGFzc3dvcmQpXG5cdFx0fVxuXHR9XSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0LmNvbmZpZyhbXCIkcm91dGVQcm92aWRlclwiICxmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcblx0XHQkcm91dGVQcm92aWRlclxuXHRcdFx0LndoZW4oJy8nICwge2NvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCB0ZW1wbGF0ZVVybDogJ3Bvc3RzLmh0bWwnfSlcblx0XHRcdC53aGVuKCcvcmVnaXN0ZXInICwge2NvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLCB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnfSlcblx0XHRcdC53aGVuKCcvbG9naW4nICwge2NvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLCB0ZW1wbGF0ZVVybDogJ2xvZ2luLmh0bWwnfSlcblx0XHRcdC53aGVuKCcvbG9nb3V0JyAsIHtjb250cm9sbGVyOiAnTG9naW5DdHJsJywgdGVtcGxhdGVVcmw6ICdsb2dvdXQuaHRtbCd9KVxuXHRcdFx0LndoZW4oJy9wb3N0LzppZCcgLCB7Y29udHJvbGxlcjogJ1NpbmdsZVBvc3RDdHJsJywgdGVtcGxhdGVVcmw6ICdzaW5nbGVQb3N0Lmh0bWwnfSlcblx0fV0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdC5jb250cm9sbGVyKCdTaW5nbGVQb3N0Q3RybCcsIFtcIiRzY29wZVwiICwgXCIkaHR0cFwiLCBcIlBvc3RzU2VydmljZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiRyb3V0ZVwiLCBcIiRsb2NhdGlvblwiICwgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIFBvc3RzU2VydmljZSwgJHJvdXRlUGFyYW1zLCAkcm91dGUsICRsb2NhdGlvbikge1xuXG5cdFx0dmFyIHBvc3RfaWQgPSAkcm91dGVQYXJhbXMuaWQ7XG5cblx0XHQkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpe1xuXHRcdFx0Ly90aGUgcGFnZSBpcyByZWFkeVxuXHRcdH0pO1xuXG5cdFx0XHRcdFx0XG5cdFx0UG9zdHNTZXJ2aWNlLnNpbmdsZSh7XG5cdFx0XHRpZDogcG9zdF9pZFxuXHRcdH0pXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3QpIHtcblx0XHRcdCRzY29wZS5wb3N0ID0gcG9zdDtcblx0XHR9KVxuXHR9XSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0LnNlcnZpY2UoJ1VzZXJTdmMnLCBbXCIkaHR0cFwiLCBmdW5jdGlvbigkaHR0cCkge1xuXHRcdHZhciBzdmMgPSB0aGlzO1xuXHRcdHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gd2luZG93LmxvY2FsU3RvcmFnZS50b2tlblxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpXG5cdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIFx0XHRcdHJldHVybiByZXNwb25zZVxuICAgIFx0XHR9KVxuXHRcdH1cblx0XHRzdmMubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHtcblx0XHRcdFx0dXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbiAodmFsKSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4gPSB2YWwuZGF0YTtcblx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gdmFsLmRhdGFcblx0XHRcdFx0cmV0dXJuIHN2Yy5nZXRVc2VyKCk7XG5cdFx0XHR9KVxuXHRcdH1cblx0XHRzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBwYXNzd29yZF9jb25maXJtKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcblx0XHRcdFx0dXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbiAodmFsKSB7XG5cdFx0XHRcdHJldHVybiBzdmMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZj0gJy8nO1x0XG5cdFx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0fVxuXHRcdHN2Yy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZj0gJy8nO1xuXHRcdH1cblx0fV0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4ucnVuKFtcIiRyb290U2NvcGVcIiwgXCIkdGltZW91dFwiICwgXCIkd2luZG93XCIgLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQsICR3aW5kb3cpIHtcblx0XG5cdChmdW5jdGlvbiBjb25uZWN0KCl7XG5cdFx0Ly9DcmVhdGUgYSB3ZWJzb2NrZXQgY29ubmVjdGlvbiB3aXRoIHRoZSBzZXJ2ZXJcblx0XHR2YXIgaG9zdCA9IFwid3M6Ly9cIiArICR3aW5kb3cubG9jYXRpb24uaG9zdFxuXHRcdCAgXG5cdFx0dmFyIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KGhvc3QpXG5cblx0XHRjb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vY29uc29sZS5sb2coJ1dlYnNvY2tldCBjb25uZWN0ZWQnKVxuXHRcdH1cblxuXG5cdFx0Y29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdC8vY29uc29sZS5sb2coJ1dlYnNvY2tldCBjbG9zZWQuIFRyeWluZyB0byByZWNvbm5lY3QuLi4nKVxuXHRcdFx0JHRpbWVvdXQoY29ubmVjdCwgMTAqMTAwMCk7XG5cdFx0fSBcblxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdC8vY29uc29sZS5sb2coZSk7XG5cdFx0XHR2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZS5kYXRhKTtcblx0XHRcdFxuXHRcdFx0dmFyIG5hbWUgPSAnd3M6JyArIG1lc3NhZ2UudG9waWM7XG5cdFx0XHR2YXIgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcblx0XHRcdC8vY29uc29sZS5sb2coXCJicm9hZGNhc3Rpbmc6IFwiKTtcblxuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KG5hbWUsIGRhdGEpO1xuXHRcdH1cblx0fSkoKVxufV0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9